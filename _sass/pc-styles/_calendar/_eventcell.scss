/*
  Appearance factorization
*/

.calendar-dayeventcell,
.calendar-eventcell {
	--opacity: 1;
}

.calendar-dayeventcell-inner,
.calendar-eventcell {
	border-left: $calendar-event-border;
	border-radius: $calendar-event-border-radius;
	background-color: $calendar-event-loading-color;
	color: $black;
	cursor: pointer;
	opacity: var(--opacity);
	transition: all 50ms ease-out, opacity .5s ease-out, background-color .15s ease-in-out;
	animation: loadingEvent 1s easing(easeInQuint) infinite alternate;

	&.isLoaded {
		background-color: var(--background);
		color: var(--foreground);
		animation: none;
	}

	&.isPast {
		background: var(--bgcolor-highlight, $pm-global-muted);
		color: inherit;
	}
	&.isPast > * {
		opacity: .5;
	}

	&.isDeclined,
	&.isCancelled {
		border-color: var(--background);
		background: var(--bgcolor-highlight, $pm-global-muted);
		color: inherit;
		text-decoration: line-through;
	}
	&.isDeclined,
	&.isCancelled {
		& > * {
			opacity: .5;
		}
	}

	&.isUnanswered {
		border-color: var(--background);
		background-color: var(--bgcolor-main-area, #{$white});
		background-image: linear-gradient(105deg, transparent 38%, var(--bordercolor-input, $pm-global-border) 42%, var(--bordercolor-input, $pm-global-border) 48%, transparent 52%, transparent 88%, var(--bordercolor-input, $pm-global-border) 92%, var(--bordercolor-input, $pm-global-border) 100%);
		background-size: 5.18px 19.32px;
		color: var(--background);
	}

	&.isSelected {
		z-index: 6;
		border-color: $calendar-event-selected-border-color;
		box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .25);
		//filter: brightness(105%);
	}
}

@keyframes loadingEvent {
	from {
		opacity: var(--opacity);
	}
	to {
		opacity: calc(var(--opacity) - .4);
	}
}


/*
  Full day event
*/

.calendar-dayeventcell {
	height: var(--height);
	padding-right: $calendar-gridcell-margin;
	padding-top: $calendar-gridcell-gutter;
	white-space: nowrap;

	&-inner {
		position: relative;
		min-height: 100%;
		padding: 0 .5em;

		&.isNotAllDay {
			border: none;

			&:not(.isUnanswered) {
				background: none;
				color: inherit;
			}

			&:hover,
			&:focus {
				background-color: var(--bgcolor-input, #F1F3F4);
			}
		}
	}

	&.isOutsideStart &-inner {
		padding-left: 0;
	}

	&.isOutsideEnd,
	&.isOutsideEnd &-inner {
		padding-right: 0;
	}

	&-circle {
		color: $calendar-event-loading-color;
	}
	&-inner.isLoaded &-circle {
		margin-right: .5em;
		color: var(--background);
	}
	&-inner.isPast &-circle {
		color: currentColor;
		opacity: .75;
	}
}


/*
  Part day event
*/

.calendar-eventcell {
	position: absolute;
	z-index: 5;

	@include respond-to($breakpoint-small) {
		&-title,
		&-timestring {
			font-size: 1.2rem;
		}
	}
}
